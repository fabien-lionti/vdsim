
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../models_tires/">
      
      
        <link rel="next" href="../trajectories/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Models vehicle - Vehicle Dynamics Simulator (VDSim)</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vehicle-models" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../.." title="Vehicle Dynamics Simulator (VDSim)" class="md-header__button md-logo" aria-label="Vehicle Dynamics Simulator (VDSim)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Vehicle Dynamics Simulator (VDSim)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Models vehicle
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="orange"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="orange"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Accueil

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../analysis_tools.md" class="md-tabs__link">
          
  
  
  Référence

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Vehicle Dynamics Simulator (VDSim)" class="md-nav__button md-logo" aria-label="Vehicle Dynamics Simulator (VDSim)" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Vehicle Dynamics Simulator (VDSim)
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Référence
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Référence
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../analysis_tools.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Analysis tools
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../models_tires/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models tires
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Models vehicle
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Models vehicle
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.base_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        base_model
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.base_model.BaseVehicleModel" class="md-nav__link">
    <span class="md-ellipsis">
      
        BaseVehicleModel
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BaseVehicleModel">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models.vehicle.base_model.BaseVehicleModel.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      
        __init__
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.base_model.BaseVehicleModel.get_dx__dt" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_dx__dt
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.base_model.BaseVehicleModel.get_slipping_angle" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_slipping_angle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.base_model.BaseVehicleModel.get_slipping_rate" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_slipping_rate
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof2_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        dof2_model
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        dof7_model
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.DOF7" class="md-nav__link">
    <span class="md-ellipsis">
      
        DOF7
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehicleConfig7DOF" class="md-nav__link">
    <span class="md-ellipsis">
      
        VehicleConfig7DOF
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VehicleConfig7DOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehicleConfig7DOF.build_tire_models" class="md-nav__link">
    <span class="md-ellipsis">
      
        build_tire_models
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF" class="md-nav__link">
    <span class="md-ellipsis">
      
        VehiclePhysicalParams7DOF
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VehiclePhysicalParams7DOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.L" class="md-nav__link">
    <span class="md-ellipsis">
      
        L
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.fz012" class="md-nav__link">
    <span class="md-ellipsis">
      
        fz012
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.fz034" class="md-nav__link">
    <span class="md-ellipsis">
      
        fz034
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.ir_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        ir_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.iz_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        iz_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.l" class="md-nav__link">
    <span class="md-ellipsis">
      
        l
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF.m_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        m_inv
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model" class="md-nav__link">
    <span class="md-ellipsis">
      
        dof10_model
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.DOF10" class="md-nav__link">
    <span class="md-ellipsis">
      
        DOF10
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="DOF10">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.DOF10.get_lateral_tire_forces" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_lateral_tire_forces
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.DOF10.get_longitudinal_tire_forces" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_longitudinal_tire_forces
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.DOF10.get_suspension_speed_travel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_suspension_speed_travel
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.DOF10.get_suspension_travel" class="md-nav__link">
    <span class="md-ellipsis">
      
        get_suspension_travel
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF" class="md-nav__link">
    <span class="md-ellipsis">
      
        VehiclePhysicalParams10DOF
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VehiclePhysicalParams10DOF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.L" class="md-nav__link">
    <span class="md-ellipsis">
      
        L
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.fz012" class="md-nav__link">
    <span class="md-ellipsis">
      
        fz012
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.fz034" class="md-nav__link">
    <span class="md-ellipsis">
      
        fz034
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ir_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        ir_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ix_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        ix_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.iy_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        iy_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.iz_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        iz_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.l" class="md-nav__link">
    <span class="md-ellipsis">
      
        l
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.m_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        m_inv
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ms_inv" class="md-nav__link">
    <span class="md-ellipsis">
      
        ms_inv
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trajectories/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Trajectories
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="vehicle-models">Vehicle models</h1>


<div class="doc doc-object doc-module">



<a id="models.vehicle.base_model"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="models.vehicle.base_model.BaseVehicleModel" class="doc doc-heading">
            <code>BaseVehicleModel</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>


        <p>Abstract base class for vehicle dynamic models.</p>
<p>Subclasses must implement <code>get_dx__dt</code>, which defines the state-space
dynamics of the model. Time integration (Euler, RK4, etc.) is handled
externally in the <code>simulation.integrators</code> module.</p>

              <details class="quote">
                <summary>Source code in <code>models/vehicle/base_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">BaseVehicleModel</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Abstract base class for vehicle dynamic models.</span>

<span class="sd">        Subclasses must implement `get_dx__dt`, which defines the state-space</span>
<span class="sd">        dynamics of the model. Time integration (Euler, RK4, etc.) is handled</span>
<span class="sd">        externally in the `simulation.integrators` module.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            params: Model-specific parameter container (dataclass, dict, etc.).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_slipping_angle</span><span class="p">(</span><span class="n">vx</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">vy</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the lateral slip angle for a wheel.</span>

<span class="sd">        Args:</span>
<span class="sd">            vx (float): Longitudinal velocity of the contact point [m/s]</span>
<span class="sd">            vy (float): Lateral velocity of the contact point [m/s]</span>
<span class="sd">            delta (float): Steering angle (wheel angle) [rad]</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Lateral slip angle [rad]</span>
<span class="sd">                - Positive means the tire is sliding outward</span>
<span class="sd">                - Zero means pure rolling in the steering direction</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">vx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="mf">0.0</span>
        <span class="k">return</span> <span class="n">delta</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">vy</span> <span class="o">/</span> <span class="n">vx</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_slipping_rate</span><span class="p">(</span><span class="n">vxp</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">w</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute the longitudinal slip ratio (sigma) for a wheel.</span>

<span class="sd">        The slip ratio quantifies the difference between the rotational speed of the wheel </span>
<span class="sd">        (converted to linear speed via the radius) and the actual longitudinal velocity </span>
<span class="sd">        of the contact point on the ground. It&#39;s used to detect whether the wheel is in </span>
<span class="sd">        traction, braking, or rolling conditions.</span>

<span class="sd">        Formula (simplified cases):</span>
<span class="sd">            - Perfect rolling:    sigma = 0</span>
<span class="sd">            - Traction (drive):   clamped to max 1</span>
<span class="sd">            - Braking (drag):     clamped to min -1</span>

<span class="sd">        Args:</span>
<span class="sd">            vxp (float): Longitudinal velocity of the contact point [m/s]</span>
<span class="sd">            w   (float): Wheel angular velocity [rad/s]</span>
<span class="sd">            r   (float): Effective wheel radius [m]</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Longitudinal slip ratio in range [-1, 1]</span>
<span class="sd">                - Positive - traction</span>
<span class="sd">                - Negative - braking</span>
<span class="sd">                - Zero - pure rolling</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">eps</span><span class="o">=</span><span class="mf">1e-3</span>
        <span class="n">wr</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">r</span>  <span class="c1"># vitesse périphérique de la roue</span>
        <span class="n">v_ref</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vxp</span><span class="p">),</span> <span class="n">eps</span><span class="p">)</span>  <span class="c1"># évite la division par zéro</span>
        <span class="n">sigma</span> <span class="o">=</span> <span class="p">(</span><span class="n">wr</span> <span class="o">-</span> <span class="n">vxp</span><span class="p">)</span> <span class="o">/</span> <span class="n">v_ref</span>
        <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">sigma</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dx__dt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">pass</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">get_dx__dt</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="n">u</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
        <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute state derivatives and all physical outputs at the current step.</span>

<span class="sd">        Args:</span>
<span class="sd">            x (np.ndarray): Current state vector, shape (n_states,).</span>
<span class="sd">            u (np.ndarray): Current control input vector, shape (n_inputs,).</span>

<span class="sd">        Returns:</span>
<span class="sd">            Tuple[np.ndarray, Dict[str, np.ndarray]]:</span>
<span class="sd">                - dx (np.ndarray): State derivatives dx/dt, shape (n_states,).</span>
<span class="sd">                - outputs (Dict[str, np.ndarray]): Physical variables to be logged,</span>
<span class="sd">                  such as tire forces, slips, accelerations, aero forces, angles, etc.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="models.vehicle.base_model.BaseVehicleModel.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">params</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>params</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Model-specific parameter container (dataclass, dict, etc.).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/base_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        params: Model-specific parameter container (dataclass, dict, etc.).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="models.vehicle.base_model.BaseVehicleModel.get_dx__dt" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_dx__dt</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">u</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Compute state derivatives and all physical outputs at the current step.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>x</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current state vector, shape (n_states,).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>u</code></td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Current control input vector, shape (n_inputs,).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="numpy.ndarray">ndarray</span>, <span title="typing.Dict">Dict</span>[str, <span title="numpy.ndarray">ndarray</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple[np.ndarray, Dict[str, np.ndarray]]:
- dx (np.ndarray): State derivatives dx/dt, shape (n_states,).
- outputs (Dict[str, np.ndarray]): Physical variables to be logged,
  such as tire forces, slips, accelerations, aero forces, angles, etc.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/base_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@abstractmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_dx__dt</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">u</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute state derivatives and all physical outputs at the current step.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (np.ndarray): Current state vector, shape (n_states,).</span>
<span class="sd">        u (np.ndarray): Current control input vector, shape (n_inputs,).</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple[np.ndarray, Dict[str, np.ndarray]]:</span>
<span class="sd">            - dx (np.ndarray): State derivatives dx/dt, shape (n_states,).</span>
<span class="sd">            - outputs (Dict[str, np.ndarray]): Physical variables to be logged,</span>
<span class="sd">              such as tire forces, slips, accelerations, aero forces, angles, etc.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">raise</span> <span class="ne">NotImplementedError</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="models.vehicle.base_model.BaseVehicleModel.get_slipping_angle" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">delta</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Compute the lateral slip angle for a wheel.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>vx</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitudinal velocity of the contact point [m/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vy</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lateral velocity of the contact point [m/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>delta</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Steering angle (wheel angle) [rad]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lateral slip angle [rad]
- Positive means the tire is sliding outward
- Zero means pure rolling in the steering direction</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/base_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_slipping_angle</span><span class="p">(</span><span class="n">vx</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">vy</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">delta</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the lateral slip angle for a wheel.</span>

<span class="sd">    Args:</span>
<span class="sd">        vx (float): Longitudinal velocity of the contact point [m/s]</span>
<span class="sd">        vy (float): Lateral velocity of the contact point [m/s]</span>
<span class="sd">        delta (float): Steering angle (wheel angle) [rad]</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Lateral slip angle [rad]</span>
<span class="sd">            - Positive means the tire is sliding outward</span>
<span class="sd">            - Zero means pure rolling in the steering direction</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">vx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>
    <span class="k">return</span> <span class="n">delta</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan</span><span class="p">(</span><span class="n">vy</span> <span class="o">/</span> <span class="n">vx</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="models.vehicle.base_model.BaseVehicleModel.get_slipping_rate" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-staticmethod"><code>staticmethod</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Compute the longitudinal slip ratio (sigma) for a wheel.</p>
<p>The slip ratio quantifies the difference between the rotational speed of the wheel 
(converted to linear speed via the radius) and the actual longitudinal velocity 
of the contact point on the ground. It's used to detect whether the wheel is in 
traction, braking, or rolling conditions.</p>
<p>Formula (simplified cases):
    - Perfect rolling:    sigma = 0
    - Traction (drive):   clamped to max 1
    - Braking (drag):     clamped to min -1</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>vxp</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitudinal velocity of the contact point [m/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>w</code></td>
            <td>
                  <code>  (float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wheel angular velocity [rad/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>r</code></td>
            <td>
                  <code>  (float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Effective wheel radius [m]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>float</code></td>            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Longitudinal slip ratio in range [-1, 1]
- Positive - traction
- Negative - braking
- Zero - pure rolling</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/base_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@staticmethod</span>
<span class="k">def</span><span class="w"> </span><span class="nf">get_slipping_rate</span><span class="p">(</span><span class="n">vxp</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">w</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">r</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute the longitudinal slip ratio (sigma) for a wheel.</span>

<span class="sd">    The slip ratio quantifies the difference between the rotational speed of the wheel </span>
<span class="sd">    (converted to linear speed via the radius) and the actual longitudinal velocity </span>
<span class="sd">    of the contact point on the ground. It&#39;s used to detect whether the wheel is in </span>
<span class="sd">    traction, braking, or rolling conditions.</span>

<span class="sd">    Formula (simplified cases):</span>
<span class="sd">        - Perfect rolling:    sigma = 0</span>
<span class="sd">        - Traction (drive):   clamped to max 1</span>
<span class="sd">        - Braking (drag):     clamped to min -1</span>

<span class="sd">    Args:</span>
<span class="sd">        vxp (float): Longitudinal velocity of the contact point [m/s]</span>
<span class="sd">        w   (float): Wheel angular velocity [rad/s]</span>
<span class="sd">        r   (float): Effective wheel radius [m]</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Longitudinal slip ratio in range [-1, 1]</span>
<span class="sd">            - Positive - traction</span>
<span class="sd">            - Negative - braking</span>
<span class="sd">            - Zero - pure rolling</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">eps</span><span class="o">=</span><span class="mf">1e-3</span>
    <span class="n">wr</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">r</span>  <span class="c1"># vitesse périphérique de la roue</span>
    <span class="n">v_ref</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">vxp</span><span class="p">),</span> <span class="n">eps</span><span class="p">)</span>  <span class="c1"># évite la division par zéro</span>
    <span class="n">sigma</span> <span class="o">=</span> <span class="p">(</span><span class="n">wr</span> <span class="o">-</span> <span class="n">vxp</span><span class="p">)</span> <span class="o">/</span> <span class="n">v_ref</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">sigma</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="models.vehicle.dof2_model"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="models.vehicle.dof7_model"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="models.vehicle.dof7_model.DOF7" class="doc doc-heading">
            <code>DOF7</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="models.vehicle.base_model.BaseVehicleModel" href="#models.vehicle.base_model.BaseVehicleModel">BaseVehicleModel</a></code></p>


        <p>7 Degrees-of-Freedom Vehicle Model with Linear Tire Forces.</p>
<p>State vector (10):
    x       - Global x-position [m]
    vx      - Longitudinal velocity [m/s]
    y       - Global y-position [m]
    vy      - Lateral velocity [m/s]
    psi     - Yaw angle [rad]
    psidt   - Yaw rate [rad/s]
    omega1  - Wheel angular velocity FL [rad/s]
    omega2  - Wheel angular velocity FR [rad/s]
    omega3  - Wheel angular velocity RL [rad/s]
    omega4  - Wheel angular velocity RR [rad/s]</p>
<p>Input vector (6):
    tf1     - Drive torque front-left [Nm]
    tf2     - Drive torque front-right [Nm]
    tr1     - Drive torque rear-left [Nm]
    tr2     - Drive torque rear-right [Nm]
    df      - Front steering angle [rad]
    dr      - Rear steering angle [rad]</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>A</code></td>
            <td>
                  <code>dictionary containing</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>m, Iz      - mass and inertia
lf, lr     - distances to axles
Cf, Cr     - cornering stiffness
R          - wheel radius
J          - wheel inertia</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>models/vehicle/dof7_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DOF7</span><span class="p">(</span><span class="n">BaseVehicleModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    7 Degrees-of-Freedom Vehicle Model with Linear Tire Forces.</span>

<span class="sd">    State vector (10):</span>
<span class="sd">        x       - Global x-position [m]</span>
<span class="sd">        vx      - Longitudinal velocity [m/s]</span>
<span class="sd">        y       - Global y-position [m]</span>
<span class="sd">        vy      - Lateral velocity [m/s]</span>
<span class="sd">        psi     - Yaw angle [rad]</span>
<span class="sd">        psidt   - Yaw rate [rad/s]</span>
<span class="sd">        omega1  - Wheel angular velocity FL [rad/s]</span>
<span class="sd">        omega2  - Wheel angular velocity FR [rad/s]</span>
<span class="sd">        omega3  - Wheel angular velocity RL [rad/s]</span>
<span class="sd">        omega4  - Wheel angular velocity RR [rad/s]</span>

<span class="sd">    Input vector (6):</span>
<span class="sd">        tf1     - Drive torque front-left [Nm]</span>
<span class="sd">        tf2     - Drive torque front-right [Nm]</span>
<span class="sd">        tr1     - Drive torque rear-left [Nm]</span>
<span class="sd">        tr2     - Drive torque rear-right [Nm]</span>
<span class="sd">        df      - Front steering angle [rad]</span>
<span class="sd">        dr      - Rear steering angle [rad]</span>

<span class="sd">    Parameters:</span>
<span class="sd">        A dictionary containing:</span>
<span class="sd">            m, Iz      - mass and inertia</span>
<span class="sd">            lf, lr     - distances to axles</span>
<span class="sd">            Cf, Cr     - cornering stiffness</span>
<span class="sd">            R          - wheel radius</span>
<span class="sd">            J          - wheel inertia</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_states</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_inputs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_keys</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;vx&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;vy&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;psi&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;psidt&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;omega1&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;omega2&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
            <span class="s2">&quot;omega3&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="s2">&quot;omega4&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
        <span class="p">}</span>


        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">asdict</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">fz012</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">fz034</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">l</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">l</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">L</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">m_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iz_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">iz_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">ir_inv</span>

        <span class="c1"># Compute constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iz_inv</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">iz</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>

        <span class="c1"># Tires</span>
        <span class="n">tires</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">build_tire_models</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f1</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire1&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f2</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire2&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f3</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire3&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f4</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire4&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_state_derivatives</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">fx1</span><span class="p">,</span> <span class="n">fx2</span><span class="p">,</span> <span class="n">fx3</span><span class="p">,</span> <span class="n">fx4</span><span class="p">,</span> <span class="n">fy1</span><span class="p">,</span> <span class="n">fy2</span><span class="p">,</span> <span class="n">fy3</span><span class="p">,</span> <span class="n">fy4</span><span class="p">,</span> <span class="n">fxp1</span><span class="p">,</span> <span class="n">fxp2</span><span class="p">,</span> <span class="n">fxp3</span><span class="p">,</span> <span class="n">fxp4</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">faero</span><span class="p">):</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">xdt</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span> <span class="o">-</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vxdt</span> <span class="o">=</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">psidt</span>  <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">fx1</span> <span class="o">+</span> <span class="n">fx2</span> <span class="o">+</span> <span class="n">fx3</span> <span class="o">+</span> <span class="n">fx4</span> <span class="o">-</span> <span class="n">faero</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">ydt</span> <span class="o">=</span> <span class="n">vx</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">vydt</span> <span class="o">=</span> <span class="o">-</span><span class="n">vx</span> <span class="o">*</span> <span class="n">psidt</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">fy1</span> <span class="o">+</span> <span class="n">fy2</span> <span class="o">+</span> <span class="n">fy3</span> <span class="o">+</span> <span class="n">fy4</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">psidt</span> <span class="o">=</span> <span class="n">psidt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">psidt2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iz_inv</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="p">(</span><span class="n">fy1</span> <span class="o">+</span> <span class="n">fy2</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="p">(</span><span class="n">fy3</span> <span class="o">+</span> <span class="n">fy4</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">omega1dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="n">fxp1</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega2dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="n">fxp2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega3dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">t3</span> <span class="o">-</span> <span class="n">fxp3</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega4dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">t4</span> <span class="o">-</span> <span class="n">fxp4</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_faero</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vx</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ra</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">*</span> <span class="n">vx</span><span class="o">**</span><span class="mi">2</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dx__dt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">state</span><span class="p">,</span> <span class="n">control</span><span class="p">):</span>

        <span class="n">x</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">w3</span><span class="p">,</span> <span class="n">w4</span> <span class="o">=</span> <span class="n">state</span>

        <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span> <span class="o">=</span> <span class="n">control</span>

        <span class="c1"># Project on tire frame</span>
        <span class="n">vxp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="n">vxp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="n">vxp3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
        <span class="n">vxp4</span> <span class="o">=</span> <span class="p">(</span><span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>

        <span class="n">vyp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="n">vyp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="n">vyp3</span> <span class="o">=</span> <span class="p">(</span><span class="n">vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
        <span class="n">vyp4</span> <span class="o">=</span> <span class="p">(</span><span class="n">vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>

        <span class="c1"># Compute lateral slip angles</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp1</span><span class="p">,</span> <span class="n">vyp1</span><span class="p">,</span> <span class="n">d1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp2</span><span class="p">,</span> <span class="n">vyp2</span><span class="p">,</span> <span class="n">d1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp3</span><span class="p">,</span> <span class="n">vyp3</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp4</span><span class="p">,</span> <span class="n">vyp4</span><span class="p">,</span> <span class="n">d2</span><span class="p">)</span>

        <span class="c1"># Compute longitudinal slip</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp3</span><span class="p">,</span> <span class="n">w3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp4</span><span class="p">,</span> <span class="n">w4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>

        <span class="c1"># Compute lateral tire forces</span>
        <span class="n">fyp1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha1</span><span class="p">)</span>
        <span class="n">fyp2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha2</span><span class="p">)</span>
        <span class="n">fyp3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f3</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha3</span><span class="p">)</span>
        <span class="n">fyp4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f4</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha4</span><span class="p">)</span>

        <span class="n">fxp1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma1</span><span class="p">)</span>
        <span class="n">fxp2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma2</span><span class="p">)</span>
        <span class="n">fxp3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f3</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma3</span><span class="p">)</span>
        <span class="n">fxp4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f4</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma4</span><span class="p">)</span>

        <span class="c1"># Project on carbody frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx1</span> <span class="o">=</span> <span class="n">fxp1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">-</span> <span class="n">fyp1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx2</span> <span class="o">=</span> <span class="n">fxp2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">-</span> <span class="n">fyp2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx3</span> <span class="o">=</span> <span class="n">fxp3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">-</span> <span class="n">fyp3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx4</span> <span class="o">=</span> <span class="n">fxp4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">-</span> <span class="n">fyp4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fy1</span> <span class="o">=</span> <span class="n">fyp1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fxp1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fy2</span> <span class="o">=</span> <span class="n">fyp2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">+</span> <span class="n">fxp2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fy3</span> <span class="o">=</span> <span class="n">fyp3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">+</span> <span class="n">fxp3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fy4</span> <span class="o">=</span> <span class="n">fyp4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span> <span class="o">+</span> <span class="n">fxp4</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">d2</span><span class="p">)</span>

        <span class="n">faero</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_faero</span><span class="p">(</span><span class="n">vx</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">get_state_derivatives</span><span class="p">(</span><span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy4</span><span class="p">,</span> <span class="n">fxp1</span><span class="p">,</span> <span class="n">fxp2</span><span class="p">,</span> <span class="n">fxp3</span><span class="p">,</span> <span class="n">fxp4</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">faero</span><span class="p">)</span>

        <span class="n">Fx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fx1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">Fy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fy1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">Fz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="n">kappa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># Tire-level</span>
            <span class="s2">&quot;Fx&quot;</span><span class="p">:</span> <span class="n">Fx</span><span class="p">,</span>
            <span class="s2">&quot;Fy&quot;</span><span class="p">:</span> <span class="n">Fy</span><span class="p">,</span>
            <span class="s2">&quot;Fz&quot;</span><span class="p">:</span> <span class="n">Fz</span><span class="p">,</span>
            <span class="s2">&quot;kappa&quot;</span><span class="p">:</span> <span class="n">kappa</span><span class="p">,</span>
            <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="n">alpha</span><span class="p">,</span>
            <span class="s2">&quot;Fx_aero&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">faero</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="s2">&quot;ax&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">vxdt</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="s2">&quot;ay&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">vydt</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="s2">&quot;yaw_acc&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">psidt2</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
        <span class="p">}</span>   

        <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">xdt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vxdt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ydt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">vydt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">psidt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">psidt2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">omega1dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">omega2dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">omega3dt</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">omega4dt</span><span class="p">],</span> <span class="n">outputs</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="models.vehicle.dof7_model.VehicleConfig7DOF" class="doc doc-heading">
            <code>VehicleConfig7DOF</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


        <p>Configuration container for a 7-DOF vehicle model.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehicleConfig7DOF.vehicle">vehicle</span></code></td>
            <td>
                  <code><a class="autorefs autorefs-internal" title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF" href="#models.vehicle.dof7_model.VehiclePhysicalParams7DOF">VehiclePhysicalParams7DOF</a></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vehicle physical properties.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehicleConfig7DOF.tire1,">tire1,</span></code></td>
            <td>
                  <code>(<span title="models.vehicle.dof7_model.VehicleConfig7DOF.tire2">tire2</span>, <span title="models.vehicle.dof7_model.VehicleConfig7DOF.tire3">tire3</span>, <span title="models.vehicle.dof7_model.VehicleConfig7DOF.tire4">tire4</span>)</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tire parameter dataclasses
(e.g. LinearTireParams, SimplifiedPacejkaTireParams).</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>models/vehicle/dof7_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">VehicleConfig7DOF</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Configuration container for a 7-DOF vehicle model.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        vehicle (VehiclePhysicalParams7DOF): Vehicle physical properties.</span>
<span class="sd">        tire1, tire2, tire3, tire4: Tire parameter dataclasses</span>
<span class="sd">            (e.g. LinearTireParams, SimplifiedPacejkaTireParams).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vehicle</span><span class="p">:</span> <span class="n">VehiclePhysicalParams7DOF</span>
    <span class="n">tire1</span><span class="p">:</span> <span class="n">Any</span>  <span class="c1"># Union[LinearTireParams, SimplifiedPacejkaTireParams]</span>
    <span class="n">tire2</span><span class="p">:</span> <span class="n">Any</span>
    <span class="n">tire3</span><span class="p">:</span> <span class="n">Any</span>
    <span class="n">tire4</span><span class="p">:</span> <span class="n">Any</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">build_tire_models</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Construct tire models based on the type of tire parameters provided.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: Dictionary mapping tire names to model instances.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tire_models</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">params</span> <span class="ow">in</span> <span class="p">{</span>
            <span class="s2">&quot;tire1&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire1</span><span class="p">,</span>
            <span class="s2">&quot;tire2&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire2</span><span class="p">,</span>
            <span class="s2">&quot;tire3&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire3</span><span class="p">,</span>
            <span class="s2">&quot;tire4&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire4</span><span class="p">,</span>
        <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">model_class</span> <span class="o">=</span> <span class="n">TIRE_MODEL_REGISTRY</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">model_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Unknown tire params type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="si">!r}</span><span class="s2">. &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;Must be one of </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">TIRE_MODEL_REGISTRY</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="n">tire_models</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_class</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tire_models</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="models.vehicle.dof7_model.VehicleConfig7DOF.build_tire_models" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">build_tire_models</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Construct tire models based on the type of tire parameters provided.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[str, <span title="typing.Any">Any</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dict[str, Any]: Dictionary mapping tire names to model instances.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/dof7_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">build_tire_models</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Construct tire models based on the type of tire parameters provided.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dict[str, Any]: Dictionary mapping tire names to model instances.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tire_models</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">params</span> <span class="ow">in</span> <span class="p">{</span>
        <span class="s2">&quot;tire1&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire1</span><span class="p">,</span>
        <span class="s2">&quot;tire2&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire2</span><span class="p">,</span>
        <span class="s2">&quot;tire3&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire3</span><span class="p">,</span>
        <span class="s2">&quot;tire4&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tire4</span><span class="p">,</span>
    <span class="p">}</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">model_class</span> <span class="o">=</span> <span class="n">TIRE_MODEL_REGISTRY</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">params</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">model_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Unknown tire params type </span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">params</span><span class="p">)</span><span class="si">!r}</span><span class="s2">. &quot;</span>
                <span class="sa">f</span><span class="s2">&quot;Must be one of </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">TIRE_MODEL_REGISTRY</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="n">tire_models</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_class</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">tire_models</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF" class="doc doc-heading">
            <code>VehiclePhysicalParams7DOF</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


        <p>Physical parameters for a 7-DOF vehicle model.</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.g">g</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Gravity acceleration [m/s²].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.m">m</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vehicle mass [kg].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.lf">lf</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance from the center of gravity (CG) to the front axle [m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.lr">lr</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance from the CG to the rear axle [m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.h">h</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of the CG above the ground [m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.L1">L1</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance from the CG to the left lateral wheel [m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.L2">L2</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance from the CG to the right lateral wheel [m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.r">r</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wheel radius [m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.iz">iz</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Yaw moment of inertia about the vertical axis [kg·m²].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.ir">ir</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Wheel rotational inertia [kg·m²].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.ra">ra</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Aerodynamic drag coefficient [N·s/m].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.s">s</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frontal area [m²].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.cx">cx</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Air drag coefficient [-].</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>models/vehicle/dof7_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">VehiclePhysicalParams7DOF</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Physical parameters for a 7-DOF vehicle model.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        g (float): Gravity acceleration [m/s²].</span>
<span class="sd">        m (float): Vehicle mass [kg].</span>
<span class="sd">        lf (float): Distance from the center of gravity (CG) to the front axle [m].</span>
<span class="sd">        lr (float): Distance from the CG to the rear axle [m].</span>
<span class="sd">        h (float): Height of the CG above the ground [m].</span>
<span class="sd">        L1 (float): Distance from the CG to the left lateral wheel [m].</span>
<span class="sd">        L2 (float): Distance from the CG to the right lateral wheel [m].</span>
<span class="sd">        r (float): Wheel radius [m].</span>
<span class="sd">        iz (float): Yaw moment of inertia about the vertical axis [kg·m²].</span>
<span class="sd">        ir (float): Wheel rotational inertia [kg·m²].</span>
<span class="sd">        ra (float): Aerodynamic drag coefficient [N·s/m].</span>
<span class="sd">        s (float): Frontal area [m²].</span>
<span class="sd">        cx (float): Air drag coefficient [-].</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">g</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [m/s²] Gravity acceleration</span>
    <span class="n">m</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [kg] Vehicle mass</span>
    <span class="n">lf</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [m] Distance from CG to front axle</span>
    <span class="n">lr</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [m] Distance from CG to rear axle</span>
    <span class="n">h</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [m] Height of the center of gravity</span>
    <span class="n">L1</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Distance from the CG to the left lateral wheel [m].</span>
    <span class="n">L2</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Distance from the CG to the right lateral wheel [m].</span>
    <span class="n">r</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [m] Wheel radius</span>
    <span class="n">iz</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [kg·m²] Yaw moment of inertia</span>
    <span class="n">ir</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [kg·m²] Wheel rotational inertia</span>
    <span class="n">ra</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [N·s/m] Aerodynamic drag coefficient</span>
    <span class="n">s</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [m²] Frontal area</span>
    <span class="n">cx</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># [-] Air drag coefficient</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">l</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[m] Total wheelbase (lf + lr)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">L</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[m] Total lateral wheelbase (L1 + L2)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L2</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fz012</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [N] Static vertical load on front axle (shared by front-left and front-right tires)</span>
<span class="sd">        Computed using static weight transfer assumption.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fz034</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        [N] Static vertical load on rear axle (shared by rear-left and rear-right tires)</span>
<span class="sd">        Computed using static weight transfer assumption.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">m_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[1/kg] Inverse of vehicle mass&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">iz_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[1/kg·m²] Inverse of yaw inertia&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">iz</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ir_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;[1/kg·m²] Inverse of wheel inertia&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.L" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">L</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[m] Total lateral wheelbase (L1 + L2)</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.fz012" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fz012</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[N] Static vertical load on front axle (shared by front-left and front-right tires)
Computed using static weight transfer assumption.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.fz034" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fz034</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[N] Static vertical load on rear axle (shared by rear-left and rear-right tires)
Computed using static weight transfer assumption.</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.ir_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ir_inv</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[1/kg·m²] Inverse of wheel inertia</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.iz_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">iz_inv</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[1/kg·m²] Inverse of yaw inertia</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.l" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">l</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[m] Total wheelbase (lf + lr)</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof7_model.VehiclePhysicalParams7DOF.m_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">m_inv</span><span class="p">:</span> <span class="nb">float</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>[1/kg] Inverse of vehicle mass</p>
    </div>

</div>





  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="models.vehicle.dof10_model"></a>
    <div class="doc doc-contents first">



  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="models.vehicle.dof10_model.DOF10" class="doc doc-heading">
            <code>DOF10</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="models.vehicle.base_model.BaseVehicleModel" href="#models.vehicle.base_model.BaseVehicleModel">BaseVehicleModel</a></code></p>


        <p>10 Degrees-of-Freedom Vehicle Model with Linear Tire Forces.</p>
<p>State vector (16):
    x       - Global x-position [m]
    vx      - Longitudinal velocity [m/s]
    y       - Global y-position [m]
    vy      - Lateral velocity [m/s]
    z       - Global z-position [m]
    vz      - Vertical velocity [m/s]
    phi     - Roll angle [rad]
    phidt   - Roll rate [rad/s]
    theta   - Pitch angle [rad]
    thetadt - Pitch rate [rad/s]
    psi     - Yaw angle [rad]
    psidt   - Yaw rate [rad/s]
    omega1  - Wheel angular velocity FL [rad/s]
    omega2  - Wheel angular velocity FR [rad/s]
    omega3  - Wheel angular velocity RL [rad/s]
    omega4  - Wheel angular velocity RR [rad/s]</p>
<p>Input vector (6):
    tf1     - Drive torque front-left [Nm]
    tf2     - Drive torque front-right [Nm]
    tr1     - Drive torque rear-left [Nm]
    tr2     - Drive torque rear-right [Nm]
    df      - Front steering angle [rad]
    dr      - Rear steering angle [rad]</p>

              <details class="quote">
                <summary>Source code in <code>models/vehicle/dof10_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span>
<span class="normal">609</span>
<span class="normal">610</span>
<span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span>
<span class="normal">651</span>
<span class="normal">652</span>
<span class="normal">653</span>
<span class="normal">654</span>
<span class="normal">655</span>
<span class="normal">656</span>
<span class="normal">657</span>
<span class="normal">658</span>
<span class="normal">659</span>
<span class="normal">660</span>
<span class="normal">661</span>
<span class="normal">662</span>
<span class="normal">663</span>
<span class="normal">664</span>
<span class="normal">665</span>
<span class="normal">666</span>
<span class="normal">667</span>
<span class="normal">668</span>
<span class="normal">669</span>
<span class="normal">670</span>
<span class="normal">671</span>
<span class="normal">672</span>
<span class="normal">673</span>
<span class="normal">674</span>
<span class="normal">675</span>
<span class="normal">676</span>
<span class="normal">677</span>
<span class="normal">678</span>
<span class="normal">679</span>
<span class="normal">680</span>
<span class="normal">681</span>
<span class="normal">682</span>
<span class="normal">683</span>
<span class="normal">684</span>
<span class="normal">685</span>
<span class="normal">686</span>
<span class="normal">687</span>
<span class="normal">688</span>
<span class="normal">689</span>
<span class="normal">690</span>
<span class="normal">691</span>
<span class="normal">692</span>
<span class="normal">693</span>
<span class="normal">694</span>
<span class="normal">695</span>
<span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span>
<span class="normal">720</span>
<span class="normal">721</span>
<span class="normal">722</span>
<span class="normal">723</span>
<span class="normal">724</span>
<span class="normal">725</span>
<span class="normal">726</span>
<span class="normal">727</span>
<span class="normal">728</span>
<span class="normal">729</span>
<span class="normal">730</span>
<span class="normal">731</span>
<span class="normal">732</span>
<span class="normal">733</span>
<span class="normal">734</span>
<span class="normal">735</span>
<span class="normal">736</span>
<span class="normal">737</span>
<span class="normal">738</span>
<span class="normal">739</span>
<span class="normal">740</span>
<span class="normal">741</span>
<span class="normal">742</span>
<span class="normal">743</span>
<span class="normal">744</span>
<span class="normal">745</span>
<span class="normal">746</span>
<span class="normal">747</span>
<span class="normal">748</span>
<span class="normal">749</span>
<span class="normal">750</span>
<span class="normal">751</span>
<span class="normal">752</span>
<span class="normal">753</span>
<span class="normal">754</span>
<span class="normal">755</span>
<span class="normal">756</span>
<span class="normal">757</span>
<span class="normal">758</span>
<span class="normal">759</span>
<span class="normal">760</span>
<span class="normal">761</span>
<span class="normal">762</span>
<span class="normal">763</span>
<span class="normal">764</span>
<span class="normal">765</span>
<span class="normal">766</span>
<span class="normal">767</span>
<span class="normal">768</span>
<span class="normal">769</span>
<span class="normal">770</span>
<span class="normal">771</span>
<span class="normal">772</span>
<span class="normal">773</span>
<span class="normal">774</span>
<span class="normal">775</span>
<span class="normal">776</span>
<span class="normal">777</span>
<span class="normal">778</span>
<span class="normal">779</span>
<span class="normal">780</span>
<span class="normal">781</span>
<span class="normal">782</span>
<span class="normal">783</span>
<span class="normal">784</span>
<span class="normal">785</span>
<span class="normal">786</span>
<span class="normal">787</span>
<span class="normal">788</span>
<span class="normal">789</span>
<span class="normal">790</span>
<span class="normal">791</span>
<span class="normal">792</span>
<span class="normal">793</span>
<span class="normal">794</span>
<span class="normal">795</span>
<span class="normal">796</span>
<span class="normal">797</span>
<span class="normal">798</span>
<span class="normal">799</span>
<span class="normal">800</span>
<span class="normal">801</span>
<span class="normal">802</span>
<span class="normal">803</span>
<span class="normal">804</span>
<span class="normal">805</span>
<span class="normal">806</span>
<span class="normal">807</span>
<span class="normal">808</span>
<span class="normal">809</span>
<span class="normal">810</span>
<span class="normal">811</span>
<span class="normal">812</span>
<span class="normal">813</span>
<span class="normal">814</span>
<span class="normal">815</span>
<span class="normal">816</span>
<span class="normal">817</span>
<span class="normal">818</span>
<span class="normal">819</span>
<span class="normal">820</span>
<span class="normal">821</span>
<span class="normal">822</span>
<span class="normal">823</span>
<span class="normal">824</span>
<span class="normal">825</span>
<span class="normal">826</span>
<span class="normal">827</span>
<span class="normal">828</span>
<span class="normal">829</span>
<span class="normal">830</span>
<span class="normal">831</span>
<span class="normal">832</span>
<span class="normal">833</span>
<span class="normal">834</span>
<span class="normal">835</span>
<span class="normal">836</span>
<span class="normal">837</span>
<span class="normal">838</span>
<span class="normal">839</span>
<span class="normal">840</span>
<span class="normal">841</span>
<span class="normal">842</span>
<span class="normal">843</span>
<span class="normal">844</span>
<span class="normal">845</span>
<span class="normal">846</span>
<span class="normal">847</span>
<span class="normal">848</span>
<span class="normal">849</span>
<span class="normal">850</span>
<span class="normal">851</span>
<span class="normal">852</span>
<span class="normal">853</span>
<span class="normal">854</span>
<span class="normal">855</span>
<span class="normal">856</span>
<span class="normal">857</span>
<span class="normal">858</span>
<span class="normal">859</span>
<span class="normal">860</span>
<span class="normal">861</span>
<span class="normal">862</span>
<span class="normal">863</span>
<span class="normal">864</span>
<span class="normal">865</span>
<span class="normal">866</span>
<span class="normal">867</span>
<span class="normal">868</span>
<span class="normal">869</span>
<span class="normal">870</span>
<span class="normal">871</span>
<span class="normal">872</span>
<span class="normal">873</span>
<span class="normal">874</span>
<span class="normal">875</span>
<span class="normal">876</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">DOF10</span><span class="p">(</span><span class="n">BaseVehicleModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    10 Degrees-of-Freedom Vehicle Model with Linear Tire Forces.</span>

<span class="sd">    State vector (16):</span>
<span class="sd">        x       - Global x-position [m]</span>
<span class="sd">        vx      - Longitudinal velocity [m/s]</span>
<span class="sd">        y       - Global y-position [m]</span>
<span class="sd">        vy      - Lateral velocity [m/s]</span>
<span class="sd">        z       - Global z-position [m]</span>
<span class="sd">        vz      - Vertical velocity [m/s]</span>
<span class="sd">        phi     - Roll angle [rad]</span>
<span class="sd">        phidt   - Roll rate [rad/s]</span>
<span class="sd">        theta   - Pitch angle [rad]</span>
<span class="sd">        thetadt - Pitch rate [rad/s]</span>
<span class="sd">        psi     - Yaw angle [rad]</span>
<span class="sd">        psidt   - Yaw rate [rad/s]</span>
<span class="sd">        omega1  - Wheel angular velocity FL [rad/s]</span>
<span class="sd">        omega2  - Wheel angular velocity FR [rad/s]</span>
<span class="sd">        omega3  - Wheel angular velocity RL [rad/s]</span>
<span class="sd">        omega4  - Wheel angular velocity RR [rad/s]</span>

<span class="sd">    Input vector (6):</span>
<span class="sd">        tf1     - Drive torque front-left [Nm]</span>
<span class="sd">        tf2     - Drive torque front-right [Nm]</span>
<span class="sd">        tr1     - Drive torque rear-left [Nm]</span>
<span class="sd">        tr2     - Drive torque rear-right [Nm]</span>
<span class="sd">        df      - Front steering angle [rad]</span>
<span class="sd">        dr      - Rear steering angle [rad]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">params</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_states</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">16</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_inputs</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">6</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params</span> <span class="o">=</span> <span class="n">params</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_keys</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="s2">&quot;vx&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
            <span class="s2">&quot;vy&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="s2">&quot;z&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
            <span class="s2">&quot;vz&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="s2">&quot;theta&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
            <span class="s2">&quot;thetadt&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
            <span class="s2">&quot;phi&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
            <span class="s2">&quot;phidt&quot;</span><span class="p">:</span> <span class="mi">9</span><span class="p">,</span>
            <span class="s2">&quot;psi&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
            <span class="s2">&quot;psidt&quot;</span><span class="p">:</span> <span class="mi">11</span><span class="p">,</span>
            <span class="s2">&quot;omega1&quot;</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span>
            <span class="s2">&quot;omega2&quot;</span><span class="p">:</span> <span class="mi">13</span><span class="p">,</span>
            <span class="s2">&quot;omega3&quot;</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
            <span class="s2">&quot;omega4&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
        <span class="p">}</span>


        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">asdict</span><span class="p">(</span><span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">fz012</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">fz034</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">l</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">l</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">L</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">m_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ms_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">ms_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ix_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">ix_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iy_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">iy_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">iz_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">iz_inv</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ir_inv</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">vehicle</span><span class="o">.</span><span class="n">ir_inv</span>

        <span class="c1"># Compute constants</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ms</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ms</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>
        <span class="c1"># self.m_inv = 1 / self.m</span>
        <span class="c1"># self.iz_inv = 1 / self.iz</span>
        <span class="c1"># self.ir_inv = 1 / self.ir</span>

        <span class="c1"># Tires</span>
        <span class="n">tires</span> <span class="o">=</span> <span class="n">params</span><span class="o">.</span><span class="n">build_tire_models</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f1</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire1&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f2</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire2&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f3</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire3&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f4</span> <span class="o">=</span> <span class="n">tires</span><span class="p">[</span><span class="s1">&#39;tire4&#39;</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_slipping_rates</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vxp1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">vxp2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">vxp3</span><span class="p">,</span> <span class="n">w3</span><span class="p">,</span> <span class="n">vxp4</span><span class="p">,</span> <span class="n">w4</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>

        <span class="n">sigma1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">sigma2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">sigma3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp3</span><span class="p">,</span> <span class="n">w3</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>
        <span class="n">sigma4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp4</span><span class="p">,</span> <span class="n">w4</span><span class="p">,</span> <span class="n">r</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">sigma1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">sigma4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_wheel_speed_in_vehicle_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span>
        <span class="k">elif</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span>
        <span class="k">elif</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">psidt</span>
        <span class="k">elif</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">psidt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_slipping_angles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vx1</span><span class="p">,</span> <span class="n">vy1</span><span class="p">,</span> <span class="n">vx2</span><span class="p">,</span> <span class="n">vy2</span><span class="p">,</span> <span class="n">vx3</span><span class="p">,</span> <span class="n">vy3</span><span class="p">,</span> <span class="n">vx4</span><span class="p">,</span> <span class="n">vy4</span><span class="p">,</span> <span class="n">delta1</span><span class="p">,</span> <span class="n">delta2</span><span class="p">,</span> <span class="n">delta3</span><span class="p">,</span> <span class="n">delta4</span><span class="p">):</span>

        <span class="n">alpha1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vx1</span><span class="p">,</span> <span class="n">vy1</span><span class="p">,</span> <span class="n">delta1</span><span class="p">)</span>
        <span class="n">alpha2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vx2</span><span class="p">,</span> <span class="n">vy2</span><span class="p">,</span> <span class="n">delta2</span><span class="p">)</span>
        <span class="n">alpha3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vx3</span><span class="p">,</span> <span class="n">vy3</span><span class="p">,</span> <span class="n">delta3</span><span class="p">)</span>
        <span class="n">alpha4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vx4</span><span class="p">,</span> <span class="n">vy4</span><span class="p">,</span> <span class="n">delta4</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">alpha4</span>

    <span class="c1"># def get_suspension_travel(self, theta, phi):</span>

    <span class="c1">#     dzg1 = self.L1 * np.sin(theta) - self.lf * np.cos(theta) * np.sin(phi)</span>
    <span class="c1">#     dzg2 = -self.L1 * np.sin(theta) - self.lf * np.cos(theta) * np.sin(phi)</span>
    <span class="c1">#     dzg3 = self.L2 * np.sin(theta) + self.lr * np.cos(theta) * np.sin(phi)</span>
    <span class="c1">#     dzg4 = -self.L2 * np.sin(theta) + self.lr * np.cos(theta) * np.sin(phi)</span>

    <span class="c1">#     return dzg1, dzg2, dzg3, dzg4</span>

    <span class="c1"># def get_suspension_speed_travel(self, theta, thetadt, phi, phidt):</span>

    <span class="c1">#     dzg1dt = self.L1 * thetadt * np.cos(theta) + self.lf * thetadt * np.sin(theta) * np.sin(phi) - self.lf * phidt * np.cos(theta) * np.cos(phi)</span>
    <span class="c1">#     dzg2dt = -self.L1 * thetadt * np.cos(theta) + self.lf * thetadt * np.sin(theta) * np.sin(phi) - self.lf * phidt * np.cos(theta) * np.cos(phi)</span>
    <span class="c1">#     dzg3dt =  self.L2 * thetadt * np.cos(theta) - self.lr * thetadt * np.sin(theta) * np.sin(phi) + self.lr * phidt * np.cos(theta) * np.cos(phi)</span>
    <span class="c1">#     dzg4dt = -self.L2 * thetadt * np.cos(theta) - self.lr * thetadt * np.sin(theta) * np.sin(phi) + self.lr * phidt * np.cos(theta) * np.cos(phi)</span>

    <span class="c1">#     return dzg1dt, dzg2dt, dzg3dt, dzg4dt</span>

    <span class="c1"># def get_vertical_normal_forces(self, dzg1, dzg2, dzg3, dzg4, dzg1dt, dzg2dt, dzg3dt, dzg4dt):</span>

    <span class="c1">#     fs1 = -self.ks1 * dzg1 - self.ds1 * dzg1dt</span>
    <span class="c1">#     fs2 = -self.ks2 * dzg2 - self.ds2 * dzg2dt</span>
    <span class="c1">#     fs3 = -self.ks3 * dzg3 - self.ds3 * dzg3dt</span>
    <span class="c1">#     fs4 = -self.ks4 * dzg4 - self.ds4 * dzg4dt</span>

    <span class="c1">#     fz1 = self.fz012 + fs1</span>
    <span class="c1">#     fz2 = self.fz012 + fs2</span>
    <span class="c1">#     fz3 = self.fz034 + fs3</span>
    <span class="c1">#     fz4 = self.fz034 + fs4</span>

    <span class="c1">#     return fz1, fz2, fz3, fz4, fs1, fs2, fs3, fs4</span>

    <span class="c1"># def get_suspension_travel(self, z, theta, phi):</span>
    <span class="c1">#     &quot;&quot;&quot;</span>
    <span class="c1">#     Compute suspension deflection (sprung mass → wheel center) for each corner.</span>

    <span class="c1">#     Args:</span>
    <span class="c1">#         z (float): Heave displacement of the sprung mass [m]</span>
    <span class="c1">#                 (z = 0 at static equilibrium).</span>
    <span class="c1">#         theta (float): Pitch angle [rad]</span>
    <span class="c1">#         phi (float): Roll angle [rad]</span>

    <span class="c1">#     Returns:</span>
    <span class="c1">#         dzg1, dzg2, dzg3, dzg4 (floats): Suspension travel at</span>
    <span class="c1">#         front-left, front-right, rear-left, rear-right.</span>
    <span class="c1">#     &quot;&quot;&quot;</span>

    <span class="c1">#     # Contribution pitch/roll (ton expression existante)</span>
    <span class="c1">#     dzg1_pr = self.L1 * np.sin(theta) - self.lf * np.cos(theta) * np.sin(phi)</span>
    <span class="c1">#     dzg2_pr = -self.L1 * np.sin(theta) - self.lf * np.cos(theta) * np.sin(phi)</span>
    <span class="c1">#     dzg3_pr = self.L2 * np.sin(theta) + self.lr * np.cos(theta) * np.sin(phi)</span>
    <span class="c1">#     dzg4_pr = -self.L2 * np.sin(theta) + self.lr * np.cos(theta) * np.sin(phi)</span>

    <span class="c1">#     # Ajout du heave global (même déplacement sur les 4 coins)</span>
    <span class="c1">#     dzg1 = z + dzg1_pr</span>
    <span class="c1">#     dzg2 = z + dzg2_pr</span>
    <span class="c1">#     dzg3 = z + dzg3_pr</span>
    <span class="c1">#     dzg4 = z + dzg4_pr</span>

    <span class="c1">#     return dzg1, dzg2, dzg3, dzg4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_suspension_travel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Suspension travel at each corner.</span>

<span class="sd">        Args:</span>
<span class="sd">            z (float): absolute CG height [m]</span>
<span class="sd">            theta (float): pitch angle [rad]</span>
<span class="sd">            phi (float): roll angle [rad]</span>

<span class="sd">        Convention:</span>
<span class="sd">            - z = self.h_cg  → static equilibrium (no suspension deflection)</span>
<span class="sd">            - z &gt; self.h_cg  → body moves up</span>
<span class="sd">            - z &lt; self.h_cg  → body moves down</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Heave relatif par rapport à la hauteur statique du CG</span>
        <span class="n">z_rel</span> <span class="o">=</span> <span class="n">z</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>

        <span class="c1"># Contribution pitch/roll (tes formules d’origine)</span>
        <span class="n">dzg1_pr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">dzg2_pr</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">dzg3_pr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">dzg4_pr</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>

        <span class="c1"># Ajout de la composante heave relative (même sur les 4 coins)</span>
        <span class="n">dzg1</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg1_pr</span>
        <span class="n">dzg2</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg2_pr</span>
        <span class="n">dzg3</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg3_pr</span>
        <span class="n">dzg4</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg4_pr</span>

        <span class="k">return</span> <span class="n">dzg1</span><span class="p">,</span> <span class="n">dzg2</span><span class="p">,</span> <span class="n">dzg3</span><span class="p">,</span> <span class="n">dzg4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_suspension_speed_travel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">zdot</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Compute time derivative of suspension travel for each corner.</span>

<span class="sd">        Args:</span>
<span class="sd">            z (float): Heave displacement [m]</span>
<span class="sd">            zdot (float): Heave velocity [m/s]</span>
<span class="sd">            theta (float): Pitch angle [rad]</span>
<span class="sd">            thetadt (float): Pitch rate [rad/s]</span>
<span class="sd">            phi (float): Roll angle [rad]</span>
<span class="sd">            phidt (float): Roll rate [rad/s]</span>

<span class="sd">        Returns:</span>
<span class="sd">            dzg1dt, dzg2dt, dzg3dt, dzg4dt: Suspension velocity at each corner.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Contribution pitch/roll (ton expression existante)</span>
        <span class="n">dzg1dt_pr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
            <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">dzg2dt_pr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
            <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">dzg3dt_pr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">dzg4dt_pr</span> <span class="o">=</span> <span class="p">(</span>
            <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
            <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># Ajout du heave (zdot) identique sur les 4 coins</span>
        <span class="n">dzg1dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg1dt_pr</span>
        <span class="n">dzg2dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg2dt_pr</span>
        <span class="n">dzg3dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg3dt_pr</span>
        <span class="n">dzg4dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg4dt_pr</span>

        <span class="k">return</span> <span class="n">dzg1dt</span><span class="p">,</span> <span class="n">dzg2dt</span><span class="p">,</span> <span class="n">dzg3dt</span><span class="p">,</span> <span class="n">dzg4dt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_vertical_normal_forces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dzg1</span><span class="p">,</span> <span class="n">dzg2</span><span class="p">,</span> <span class="n">dzg3</span><span class="p">,</span> <span class="n">dzg4</span><span class="p">,</span>
                               <span class="n">dzg1dt</span><span class="p">,</span> <span class="n">dzg2dt</span><span class="p">,</span> <span class="n">dzg3dt</span><span class="p">,</span> <span class="n">dzg4dt</span><span class="p">):</span>

        <span class="n">fs1</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ks1</span> <span class="o">*</span> <span class="n">dzg1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds1</span> <span class="o">*</span> <span class="n">dzg1dt</span>
        <span class="n">fs2</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ks2</span> <span class="o">*</span> <span class="n">dzg2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds2</span> <span class="o">*</span> <span class="n">dzg2dt</span>
        <span class="n">fs3</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ks3</span> <span class="o">*</span> <span class="n">dzg3</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds3</span> <span class="o">*</span> <span class="n">dzg3dt</span>
        <span class="n">fs4</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">ks4</span> <span class="o">*</span> <span class="n">dzg4</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ds4</span> <span class="o">*</span> <span class="n">dzg4dt</span>

        <span class="n">fz1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span> <span class="o">+</span> <span class="n">fs1</span>
        <span class="n">fz2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span> <span class="o">+</span> <span class="n">fs2</span>
        <span class="n">fz3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span> <span class="o">+</span> <span class="n">fs3</span>
        <span class="n">fz4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span> <span class="o">+</span> <span class="n">fs4</span>

        <span class="k">return</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">fz4</span><span class="p">,</span> <span class="n">fs1</span><span class="p">,</span> <span class="n">fs2</span><span class="p">,</span> <span class="n">fs3</span><span class="p">,</span> <span class="n">fs4</span>



    <span class="k">def</span><span class="w"> </span><span class="nf">get_longitudinal_tire_forces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigma1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">,</span> <span class="n">fz4</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Return longitudinal tires forces in the tire frame&#39;&#39;&#39;</span>

        <span class="c1"># Compute longitudinal tire forces</span>
        <span class="n">fx1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="n">sigma1</span><span class="p">)</span>
        <span class="n">fx2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">)</span>
        <span class="n">fx3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f3</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">)</span>
        <span class="n">fx4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f4</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fx1</span><span class="p">,</span> <span class="n">fx2</span><span class="p">,</span> <span class="n">fx3</span><span class="p">,</span> <span class="n">fx4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_lateral_tire_forces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigma1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">,</span> <span class="n">fz4</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Return lateral tire forces in the tire frame&#39;&#39;&#39;</span>

        <span class="c1"># Compute lateral tire forces</span>
        <span class="n">fy1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">)</span>
        <span class="n">fy2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">)</span>
        <span class="n">fy3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">)</span>
        <span class="n">fy4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">fy1</span><span class="p">,</span> <span class="n">fy2</span><span class="p">,</span> <span class="n">fy3</span><span class="p">,</span> <span class="n">fy4</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">project_from_tire_to_carbody_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uxt</span><span class="p">,</span> <span class="n">uyt</span><span class="p">,</span> <span class="n">delta</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">fz</span><span class="p">):</span>
        <span class="n">uxc</span> <span class="o">=</span> <span class="p">(</span><span class="n">uxt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">-</span> <span class="n">uyt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">+</span> <span class="n">fz</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">uyc</span> <span class="o">=</span> <span class="p">(</span><span class="n">uxt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">-</span> <span class="n">uyt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">uxt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">+</span> <span class="n">uyt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">delta</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="n">fz</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">uxc</span><span class="p">,</span> <span class="n">uyc</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">project_from_carbody_to_tire_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uxc</span><span class="p">,</span> <span class="n">uyc</span><span class="p">,</span> <span class="n">delta</span><span class="p">):</span>
        <span class="n">uxt</span> <span class="o">=</span> <span class="n">uxc</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">+</span> <span class="n">uyc</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
        <span class="n">uyt</span> <span class="o">=</span> <span class="o">-</span><span class="n">uxc</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> <span class="o">+</span> <span class="n">uyc</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span> 
        <span class="k">return</span> <span class="n">uxt</span><span class="p">,</span> <span class="n">uyt</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_faero</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vx</span><span class="p">):</span>
        <span class="k">return</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">ra</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">s</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">cx</span> <span class="o">*</span> <span class="n">vx</span><span class="o">**</span><span class="mi">2</span>

    <span class="c1"># def get_state_derivatives(self, x2, x4, x5, x6, x7, x8, x9, x10, x11, x12, u1, u2, u3, u4, </span>
    <span class="c1">#                           fx1, fx2, fx3, fx4, </span>
    <span class="c1">#                           fy1, fy2, fy3, fy4,</span>
    <span class="c1">#                           fz1, fz2, fz3, fz4,</span>
    <span class="c1">#                           fs1, fs2, fs3, fs4,</span>
    <span class="c1">#                           fxp1, fxp2, fxp3, fxp4,</span>
    <span class="c1">#                           faero):</span>

    <span class="c1">#     fz1 = fz1 * np.cos(x9) * np.cos(x7)</span>
    <span class="c1">#     fz2 = fz2 * np.cos(x9) * np.cos(x7)</span>
    <span class="c1">#     fz3 = fz3 * np.cos(x9) * np.cos(x7)</span>
    <span class="c1">#     fz4 = fz4 * np.cos(x9) * np.cos(x7)</span>

    <span class="c1">#     self.x1dt = x2 * np.cos(x11) - x4 * np.sin(x11)</span>
    <span class="c1">#     self.x2dt = x12 * x4 - x10 * x6 + self.m_inv * (fx1 + fx2 + fx3 + fx4 - faero * np.cos(x9))</span>
    <span class="c1">#     self.x3dt = x2 * np.sin(x11) + x4 * np.cos(x11)</span>
    <span class="c1">#     self.x4dt = -x12 * x2 + x8 * x6 + self.m_inv * (fy1 + fy2 + fy3 + fy4)</span>
    <span class="c1">#     self.x5dt = x6</span>
    <span class="c1">#     self.x6dt = self.ms_inv * (fz1 + fz2 + fz3 + fz4) - self.g * np.cos(x7) * np.cos(x9)</span>

    <span class="c1">#     self.x7dt = x8</span>
    <span class="c1">#     self.x8dt = self.ix_inv * ( self.L1 * (fz1 + fz3 - fz2 - fz4) + x5 * (fy1 + fy2 + fy3 + fy4) )</span>
    <span class="c1">#     self.x9dt = x10</span>
    <span class="c1">#     self.x10dt = self.iy_inv * ( -self.lf * (fz1 + fz2 ) + self.lr * (fz3 + fz4) - x5 * (fx1 + fx2 + fx3 + fx4) )</span>
    <span class="c1">#     self.x11dt = x12</span>
    <span class="c1">#     self.x12dt = self.iz_inv * ( self.lf * (fy1 + fy2) - self.lr * (fy3 + fy4) + self.L1 * (fx2 + fx4 - fx1 - fx3) )</span>

    <span class="c1">#     self.x13dt = (u1 - self.r * fxp1) / (self.ir)</span>
    <span class="c1">#     self.x14dt = (u2 - self.r * fxp2) / (self.ir)</span>
    <span class="c1">#     self.x15dt = (u3 - self.r * fxp3) / (self.ir)</span>
    <span class="c1">#     self.x16dt = (u4 - self.r * fxp4) / (self.ir)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_state_derivatives</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">Vx</span><span class="p">,</span> <span class="n">Vy</span><span class="p">,</span>
        <span class="n">z</span><span class="p">,</span> <span class="n">Vz</span><span class="p">,</span>
        <span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="p">,</span>
        <span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="p">,</span>
        <span class="n">psi</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span>
        <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span>
        <span class="n">fx1</span><span class="p">,</span> <span class="n">fx2</span><span class="p">,</span> <span class="n">fx3</span><span class="p">,</span> <span class="n">fx4</span><span class="p">,</span>
        <span class="n">fy1</span><span class="p">,</span> <span class="n">fy2</span><span class="p">,</span> <span class="n">fy3</span><span class="p">,</span> <span class="n">fy4</span><span class="p">,</span>
        <span class="n">fz1</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">fz4</span><span class="p">,</span>
        <span class="n">fs1</span><span class="p">,</span> <span class="n">fs2</span><span class="p">,</span> <span class="n">fs3</span><span class="p">,</span> <span class="n">fs4</span><span class="p">,</span>
        <span class="n">fxp1</span><span class="p">,</span> <span class="n">fxp2</span><span class="p">,</span> <span class="n">fxp3</span><span class="p">,</span> <span class="n">fxp4</span><span class="p">,</span>
        <span class="n">faero</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="c1"># Correction orientation verticale des forces normales</span>
        <span class="n">fz1</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">fz2</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">fz3</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">fz4</span> <span class="o">*=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Positions globales</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">X_dt</span> <span class="o">=</span> <span class="n">Vx</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span> <span class="o">-</span> <span class="n">Vy</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Y_dt</span> <span class="o">=</span> <span class="n">Vx</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span> <span class="o">+</span> <span class="n">Vy</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">psi</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Dynamique longitudinale / latérale</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Vx_dt</span> <span class="o">=</span> <span class="n">psidt</span> <span class="o">*</span> <span class="n">Vy</span> <span class="o">-</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">Vz</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">*</span> <span class="p">(</span>
            <span class="n">fx1</span> <span class="o">+</span> <span class="n">fx2</span> <span class="o">+</span> <span class="n">fx3</span> <span class="o">+</span> <span class="n">fx4</span> <span class="o">-</span> <span class="n">faero</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Vy_dt</span> <span class="o">=</span> <span class="o">-</span><span class="n">psidt</span> <span class="o">*</span> <span class="n">Vx</span> <span class="o">+</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">Vz</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">m_inv</span> <span class="o">*</span> <span class="p">(</span>
            <span class="n">fy1</span> <span class="o">+</span> <span class="n">fy2</span> <span class="o">+</span> <span class="n">fy3</span> <span class="o">+</span> <span class="n">fy4</span>
        <span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Heave</span>
        <span class="c1"># ------------------------------------------------------------</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">Z_dt</span> <span class="o">=</span> <span class="n">Vz</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Vz_dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ms_inv</span> <span class="o">*</span> <span class="p">(</span><span class="n">fz1</span> <span class="o">+</span> <span class="n">fz2</span> <span class="o">+</span> <span class="n">fz3</span> <span class="o">+</span> <span class="n">fz4</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>

        <span class="c1"># print(self.ms_inv * (fz1 + fz2 + fz3 + fz4), self.g * np.cos(theta) * np.cos(phi))</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Tangage (pitch)</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">theta_dt</span> <span class="o">=</span> <span class="n">thetadt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">thetadt_dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ix_inv</span> <span class="o">*</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="p">(</span><span class="n">fz1</span> <span class="o">+</span> <span class="n">fz3</span> <span class="o">-</span> <span class="n">fz2</span> <span class="o">-</span> <span class="n">fz4</span><span class="p">)</span> <span class="o">+</span> <span class="n">z</span> <span class="o">*</span> <span class="p">(</span><span class="n">fy1</span> <span class="o">+</span> <span class="n">fy2</span> <span class="o">+</span> <span class="n">fy3</span> <span class="o">+</span> <span class="n">fy4</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># print(fz1 + fz3, fz2 + fz4)</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Roulis (roll)</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phi_dt</span> <span class="o">=</span> <span class="n">phidt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phidt_dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iy_inv</span> <span class="o">*</span> <span class="p">(</span>
            <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="p">(</span><span class="n">fz1</span> <span class="o">+</span> <span class="n">fz2</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="p">(</span><span class="n">fz3</span> <span class="o">+</span> <span class="n">fz4</span><span class="p">)</span> <span class="o">-</span> <span class="n">z</span> <span class="o">*</span> <span class="p">(</span><span class="n">fx1</span> <span class="o">+</span> <span class="n">fx2</span> <span class="o">+</span> <span class="n">fx3</span> <span class="o">+</span> <span class="n">fx4</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Lacet (yaw)</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">psi_dt</span> <span class="o">=</span> <span class="n">psidt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">psidt_dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">iz_inv</span> <span class="o">*</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="p">(</span><span class="n">fy1</span> <span class="o">+</span> <span class="n">fy2</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="p">(</span><span class="n">fy3</span> <span class="o">+</span> <span class="n">fy4</span><span class="p">)</span>
            <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="p">(</span><span class="n">fx2</span> <span class="o">+</span> <span class="n">fx4</span> <span class="o">-</span> <span class="n">fx1</span> <span class="o">-</span> <span class="n">fx3</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------</span>
        <span class="c1"># Dynamique roue</span>
        <span class="c1"># ------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega1_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t1</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">*</span> <span class="n">fxp1</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega2_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t2</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">*</span> <span class="n">fxp2</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega3_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t3</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">*</span> <span class="n">fxp3</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">omega4_dt</span> <span class="o">=</span> <span class="p">(</span><span class="n">t4</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span> <span class="o">*</span> <span class="n">fxp4</span><span class="p">)</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>


    <span class="c1"># def get_dx__dt(self, x, u):</span>


    <span class="c1">#     ### Control input correspondances</span>
    <span class="c1">#     # u1 = t1</span>
    <span class="c1">#     # u2 = t2</span>
    <span class="c1">#     # u3 = t3</span>
    <span class="c1">#     # u4 = t4</span>
    <span class="c1">#     # u5 = df</span>
    <span class="c1">#     # u6 = dr</span>

    <span class="c1">#     ### State correspondances</span>
    <span class="c1">#     # x1 = x</span>
    <span class="c1">#     # x2 = Vx</span>
    <span class="c1">#     # x3 = y</span>
    <span class="c1">#     # x4 = Vy</span>
    <span class="c1">#     # x5 = z</span>
    <span class="c1">#     # x6 = Vz</span>
    <span class="c1">#     # x7 = theta</span>
    <span class="c1">#     # x8 = thetadt</span>
    <span class="c1">#     # x9 = phi</span>
    <span class="c1">#     # x10 = phidt</span>
    <span class="c1">#     # x11 = psi</span>
    <span class="c1">#     # x12 = psidt</span>
    <span class="c1">#     # x13 = omega1</span>
    <span class="c1">#     # x14 = omega2</span>
    <span class="c1">#     # x15 = omega3</span>
    <span class="c1">#     # x16 = omega4</span>

    <span class="c1">#     x1, x2, x3, x4, x5, x6, x7, x8, x9, x10, x11, x12, x13, x14, x15, x16 = x</span>

    <span class="c1">#     u1, u2, u3, u4, u5, u6 = u</span>

    <span class="c1">#     # Compute vxp for each wheels in wheel basis</span>

    <span class="c1">#     vxp1 = (x2 - self.L1 * x12) * np.cos(u5) + (x4 + self.lf * x12) * np.sin(u5)</span>
    <span class="c1">#     vxp2 = (x2 + self.L1 * x12) * np.cos(u5) + (x4 + self.lf * x12) * np.sin(u5)</span>
    <span class="c1">#     vxp3 = (x2 - self.L1 * x12) * np.cos(u6) + (x4 - self.lf * x12) * np.sin(u6)</span>
    <span class="c1">#     vxp4 = (x2 + self.L1 * x12) * np.cos(u6) + (x4 - self.lf * x12) * np.sin(u6)</span>

    <span class="c1">#     vyp1 = (x4 + self.lf * x12) * np.cos(u5) - (x2 - self.L1 * x12) * np.sin(u5)</span>
    <span class="c1">#     vyp2 = (x4 + self.lf * x12) * np.cos(u5) - (x2 + self.L1 * x12) * np.sin(u5)</span>
    <span class="c1">#     vyp3 = (x4 - self.lf * x12) * np.cos(u6) - (x2 - self.L1 * x12) * np.sin(u6)</span>
    <span class="c1">#     vyp4 = (x4 - self.lf * x12) * np.cos(u6) - (x2 + self.L1 * x12) * np.sin(u6)</span>

    <span class="c1">#     # Compute lateral slip angles</span>
    <span class="c1">#     self.alpha1 = self.get_slipping_angle(vxp1, vyp1, u5)</span>
    <span class="c1">#     self.alpha2 = self.get_slipping_angle(vxp2, vyp2, u5)</span>
    <span class="c1">#     self.alpha3 = self.get_slipping_angle(vxp3, vyp3, u6)</span>
    <span class="c1">#     self.alpha4 = self.get_slipping_angle(vxp4, vyp4, u6)</span>

    <span class="c1">#     # Compute longitudinal slip</span>
    <span class="c1">#     self.sigma1 = self.get_slipping_rate(vxp1, x13, self.r)</span>
    <span class="c1">#     self.sigma2 = self.get_slipping_rate(vxp2, x14, self.r)</span>
    <span class="c1">#     self.sigma3 = self.get_slipping_rate(vxp3, x15, self.r)</span>
    <span class="c1">#     self.sigma4 = self.get_slipping_rate(vxp4, x16, self.r)</span>

    <span class="c1">#     # Compute suspension and normal reaction forces</span>
    <span class="c1">#     dzg1, dzg2, dzg3, dzg4 = self.get_suspension_travel(theta = x7, phi = x9)</span>
    <span class="c1">#     dzg1dt, dzg2dt, dzg3dt, dzg4dt = self.get_suspension_speed_travel(theta = x7, thetadt = x8, phi = x9, phidt = x10)</span>
    <span class="c1">#     self.fz1, self.fz2, self.fz3, self.fz4, self.fs1, self.fs2, self.fs3, self.fs4 = self.get_vertical_normal_forces(dzg1, dzg2, dzg3, dzg4, dzg1dt, dzg2dt, dzg3dt, dzg4dt)</span>

    <span class="c1">#     fxp1 = self.f1.get_fx0(self.fz012, self.fz1, self.sigma1)</span>
    <span class="c1">#     fxp2 = self.f2.get_fx0(self.fz012, self.fz2, self.sigma2)</span>
    <span class="c1">#     fxp3 = self.f3.get_fx0(self.fz034, self.fz3, self.sigma3)</span>
    <span class="c1">#     fxp4 = self.f4.get_fx0(self.fz034, self.fz4, self.sigma4)</span>

    <span class="c1">#     fyp1 = self.f1.get_fy0(self.fz012, self.fz1, self.alpha1)</span>
    <span class="c1">#     fyp2 = self.f2.get_fy0(self.fz012, self.fz2, self.alpha2)</span>
    <span class="c1">#     fyp3 = self.f3.get_fy0(self.fz034, self.fz3, self.alpha3)</span>
    <span class="c1">#     fyp4 = self.f4.get_fy0(self.fz034, self.fz4, self.alpha4)</span>

    <span class="c1">#     # Get tire forces in vehicle basis</span>

    <span class="c1">#     self.fx1, self.fy1 = self.project_from_tire_to_carbody_frame(fxp1, fyp1, u5, x9, x7, self.fz1)</span>
    <span class="c1">#     self.fx2, self.fy2 = self.project_from_tire_to_carbody_frame(fxp2, fyp2, u5, x9, x7, self.fz2)</span>
    <span class="c1">#     self.fx3, self.fy3 = self.project_from_tire_to_carbody_frame(fxp3, fyp3, u6, x9, x7, self.fz3)</span>
    <span class="c1">#     self.fx4, self.fy4 = self.project_from_tire_to_carbody_frame(fxp4, fyp4, u6, x9, x7, self.fz4)</span>

    <span class="c1">#     # TODO</span>
    <span class="c1">#     faero = self.get_faero(x2)</span>

    <span class="c1">#     self.get_state_derivatives(x2, x4, x5, x6, x7, x8, x9, x10, x11, x12, u1, u2, u3, u4, </span>
    <span class="c1">#                         self.fx1, self.fx2, self.fx3, self.fx4, </span>
    <span class="c1">#                         self.fy1, self.fy2, self.fy3, self.fy4,</span>
    <span class="c1">#                         self.fz1, self.fz2, self.fz3, self.fz4,</span>
    <span class="c1">#                         self.fs1, self.fs2, self.fs3, self.fs4,</span>
    <span class="c1">#                         fxp1, fxp2, fxp3, fxp4,</span>
    <span class="c1">#                         faero)</span>

    <span class="c1">#     dx = np.array(</span>
    <span class="c1">#     [</span>
    <span class="c1">#         self.x1dt,</span>
    <span class="c1">#         self.x2dt,</span>
    <span class="c1">#         self.x3dt,</span>
    <span class="c1">#         self.x4dt,</span>
    <span class="c1">#         self.x5dt,</span>
    <span class="c1">#         self.x6dt,</span>
    <span class="c1">#         self.x7dt,</span>
    <span class="c1">#         self.x8dt,</span>
    <span class="c1">#         self.x9dt,</span>
    <span class="c1">#         self.x10dt,</span>
    <span class="c1">#         self.x11dt,</span>
    <span class="c1">#         self.x12dt,</span>
    <span class="c1">#         self.x13dt,</span>
    <span class="c1">#         self.x14dt,</span>
    <span class="c1">#         self.x15dt,</span>
    <span class="c1">#         self.x16dt,</span>
    <span class="c1">#     ],</span>
    <span class="c1">#     dtype=float,</span>
    <span class="c1">#     )</span>

    <span class="c1">#     # ------------------------------------------------------------------</span>
    <span class="c1">#     # Outputs à logger (pas d’états, seulement grandeurs dérivées)</span>
    <span class="c1">#     # ------------------------------------------------------------------</span>
    <span class="c1">#     Fx = np.array([self.fx1, self.fx2, self.fx3, self.fx4], dtype=float)</span>
    <span class="c1">#     Fy = np.array([self.fy1, self.fy2, self.fy3, self.fy4], dtype=float)</span>
    <span class="c1">#     Fz = np.array([self.fz1, self.fz2, self.fz3, self.fz4], dtype=float)</span>
    <span class="c1">#     kappa = np.array([self.sigma1, self.sigma2, self.sigma3, self.sigma4], dtype=float)</span>
    <span class="c1">#     alpha = np.array([self.alpha1, self.alpha2, self.alpha3, self.alpha4], dtype=float)</span>
    <span class="c1">#     Fs = np.array([self.fs1, self.fs2, self.fs3, self.fs4], dtype=float)</span>

    <span class="c1">#     # Accélérations CG dans le repère véhicule</span>
    <span class="c1">#     ax = self.x2dt       # dvx/dt</span>
    <span class="c1">#     ay = self.x4dt       # dvy/dt</span>
    <span class="c1">#     az = self.x6dt       # d(zdot)/dt</span>

    <span class="c1">#     outputs: Dict[str, np.ndarray] = {</span>
    <span class="c1">#         &quot;Fx&quot;: Fx,</span>
    <span class="c1">#         &quot;Fy&quot;: Fy,</span>
    <span class="c1">#         &quot;Fz&quot;: Fz,</span>
    <span class="c1">#         &quot;kappa&quot;: kappa,</span>
    <span class="c1">#         &quot;alpha&quot;: alpha,</span>
    <span class="c1">#         &quot;Fs&quot;: Fs,  # suspension forces (optionnel, pour analyse)</span>
    <span class="c1">#         &quot;Fx_aero&quot;: np.array([faero], dtype=float),</span>
    <span class="c1">#         &quot;ax&quot;: np.array([ax], dtype=float),</span>
    <span class="c1">#         &quot;ay&quot;: np.array([ay], dtype=float),</span>
    <span class="c1">#         &quot;az&quot;: np.array([az], dtype=float),</span>
    <span class="c1">#     }</span>

    <span class="c1">#     return dx, outputs</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">get_dx__dt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">u</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Unpack state and inputs using physical names</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="n">x_pos</span><span class="p">,</span> <span class="n">Vx</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">,</span> <span class="n">Vy</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">Vz</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="p">,</span> <span class="n">psi</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span> <span class="n">omega1</span><span class="p">,</span> <span class="n">omega2</span><span class="p">,</span> <span class="n">omega3</span><span class="p">,</span> <span class="n">omega4</span> <span class="o">=</span> <span class="n">x</span>
        <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">dr</span> <span class="o">=</span> <span class="n">u</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Compute vxp / vyp for each wheel in wheel basis</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Front axle uses df, rear axle uses dr</span>
        <span class="n">vxp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">vxp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">vxp3</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>
        <span class="n">vxp4</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>

        <span class="n">vyp1</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">vyp2</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">df</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="n">vyp3</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>
        <span class="n">vyp4</span> <span class="o">=</span> <span class="p">(</span><span class="n">Vy</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">Vx</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">psidt</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dr</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Lateral slip angles</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp1</span><span class="p">,</span> <span class="n">vyp1</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp2</span><span class="p">,</span> <span class="n">vyp2</span><span class="p">,</span> <span class="n">df</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp3</span><span class="p">,</span> <span class="n">vyp3</span><span class="p">,</span> <span class="n">dr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alpha4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_angle</span><span class="p">(</span><span class="n">vxp4</span><span class="p">,</span> <span class="n">vyp4</span><span class="p">,</span> <span class="n">dr</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Longitudinal slip ratios</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp1</span><span class="p">,</span> <span class="n">omega1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp2</span><span class="p">,</span> <span class="n">omega2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp3</span><span class="p">,</span> <span class="n">omega3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sigma4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_slipping_rate</span><span class="p">(</span><span class="n">vxp4</span><span class="p">,</span> <span class="n">omega4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">r</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Suspension travel and vertical forces</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="n">dzg1</span><span class="p">,</span> <span class="n">dzg2</span><span class="p">,</span> <span class="n">dzg3</span><span class="p">,</span> <span class="n">dzg4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_suspension_travel</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="n">phi</span><span class="p">)</span>
        <span class="n">dzg1dt</span><span class="p">,</span> <span class="n">dzg2dt</span><span class="p">,</span> <span class="n">dzg3dt</span><span class="p">,</span> <span class="n">dzg4dt</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_suspension_speed_travel</span><span class="p">(</span>
            <span class="n">z</span><span class="p">,</span> <span class="n">Vz</span><span class="p">,</span> <span class="n">theta</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="o">=</span><span class="n">thetadt</span><span class="p">,</span> <span class="n">phi</span><span class="o">=</span><span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="o">=</span><span class="n">phidt</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fz1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs4</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">get_vertical_normal_forces</span><span class="p">(</span>
                <span class="n">dzg1</span><span class="p">,</span> <span class="n">dzg2</span><span class="p">,</span> <span class="n">dzg3</span><span class="p">,</span> <span class="n">dzg4</span><span class="p">,</span>
                <span class="n">dzg1dt</span><span class="p">,</span> <span class="n">dzg2dt</span><span class="p">,</span> <span class="n">dzg3dt</span><span class="p">,</span> <span class="n">dzg4dt</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Tire forces in tire frame (fxp, fyp)</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="n">fxp1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma1</span><span class="p">)</span>
        <span class="n">fxp2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma2</span><span class="p">)</span>
        <span class="n">fxp3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f3</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma3</span><span class="p">)</span>
        <span class="n">fxp4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f4</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma4</span><span class="p">)</span>

        <span class="n">fyp1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha1</span><span class="p">)</span>
        <span class="n">fyp2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha2</span><span class="p">)</span>
        <span class="n">fyp3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f3</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha3</span><span class="p">)</span>
        <span class="n">fyp4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f4</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha4</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Projection des forces dans le repère châssis</span>
        <span class="c1"># project_from_tire_to_carbody_frame(fxp, fyp, delta, phi, theta, fz)</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_from_tire_to_carbody_frame</span><span class="p">(</span><span class="n">fxp1</span><span class="p">,</span> <span class="n">fyp1</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_from_tire_to_carbody_frame</span><span class="p">(</span><span class="n">fxp2</span><span class="p">,</span> <span class="n">fyp2</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_from_tire_to_carbody_frame</span><span class="p">(</span><span class="n">fxp3</span><span class="p">,</span> <span class="n">fyp3</span><span class="p">,</span> <span class="n">dr</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fx4</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">project_from_tire_to_carbody_frame</span><span class="p">(</span><span class="n">fxp4</span><span class="p">,</span> <span class="n">fyp4</span><span class="p">,</span> <span class="n">dr</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz4</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Aérodynamique</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="n">faero</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_faero</span><span class="p">(</span><span class="n">Vx</span><span class="p">)</span>

        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Dérivées d&#39;état (implémentation existante)</span>
        <span class="c1"># get_state_derivatives(Vx, Vy, z, Vz, theta, thetadt, phi, phidt, psi, psidt, t1..t4, forces, ...)</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_state_derivatives</span><span class="p">(</span>
            <span class="n">Vx</span><span class="p">,</span> <span class="n">Vy</span><span class="p">,</span>
            <span class="n">z</span><span class="p">,</span> <span class="n">Vz</span><span class="p">,</span>
            <span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="p">,</span>
            <span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="p">,</span>
            <span class="n">psi</span><span class="p">,</span> <span class="n">psidt</span><span class="p">,</span>
            <span class="n">t1</span><span class="p">,</span> <span class="n">t2</span><span class="p">,</span> <span class="n">t3</span><span class="p">,</span> <span class="n">t4</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fx1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx4</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fy1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy4</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fz1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz4</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fs1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs4</span><span class="p">,</span>
            <span class="n">fxp1</span><span class="p">,</span> <span class="n">fxp2</span><span class="p">,</span> <span class="n">fxp3</span><span class="p">,</span> <span class="n">fxp4</span><span class="p">,</span>
            <span class="n">faero</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="n">dx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">X_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Vx_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Y_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Vy_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Z_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">Vz_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">theta_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">thetadt_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phi_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">phidt_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">psi_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">psidt_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">omega1_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">omega2_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">omega3_dt</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">omega4_dt</span>
        <span class="p">])</span>


        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="c1"># Outputs à logger (pas d’états, seulement grandeurs dérivées)</span>
        <span class="c1"># ------------------------------------------------------------------</span>
        <span class="n">Fx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fx1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fx4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">Fy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fy1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fy4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">Fz</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fz1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">kappa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">sigma1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sigma4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">alpha</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">alpha1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">alpha4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
        <span class="n">Fs</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">fs1</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fs4</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

        <span class="c1"># Accélérations CG dans le repère véhicule</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Vx_dt</span>   <span class="c1"># dVx/dt</span>
        <span class="n">ay</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Vy_dt</span>   <span class="c1"># dVy/dt</span>
        <span class="n">az</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">Vz_dt</span>   <span class="c1"># dVz/dt</span>

        <span class="n">outputs</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;Fx&quot;</span><span class="p">:</span> <span class="n">Fx</span><span class="p">,</span>
            <span class="s2">&quot;Fy&quot;</span><span class="p">:</span> <span class="n">Fy</span><span class="p">,</span>
            <span class="s2">&quot;Fz&quot;</span><span class="p">:</span> <span class="n">Fz</span><span class="p">,</span>
            <span class="s2">&quot;kappa&quot;</span><span class="p">:</span> <span class="n">kappa</span><span class="p">,</span>
            <span class="s2">&quot;alpha&quot;</span><span class="p">:</span> <span class="n">alpha</span><span class="p">,</span>
            <span class="s2">&quot;Fs&quot;</span><span class="p">:</span> <span class="n">Fs</span><span class="p">,</span>
            <span class="s2">&quot;Fx_aero&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">faero</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="s2">&quot;ax&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ax</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="s2">&quot;ay&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">ay</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
            <span class="s2">&quot;az&quot;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">az</span><span class="p">],</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">),</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">dx</span><span class="p">,</span> <span class="n">outputs</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="models.vehicle.dof10_model.DOF10.get_lateral_tire_forces" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_lateral_tire_forces</span><span class="p">(</span><span class="n">sigma1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">,</span> <span class="n">fz4</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return lateral tire forces in the tire frame</p>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/dof10_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_lateral_tire_forces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigma1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">,</span> <span class="n">fz4</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Return lateral tire forces in the tire frame&#39;&#39;&#39;</span>

    <span class="c1"># Compute lateral tire forces</span>
    <span class="n">fy1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">)</span>
    <span class="n">fy2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">)</span>
    <span class="n">fy3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">)</span>
    <span class="n">fy4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fl_tire_model</span><span class="o">.</span><span class="n">get_fy0</span><span class="p">(</span><span class="n">fz4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fy1</span><span class="p">,</span> <span class="n">fy2</span><span class="p">,</span> <span class="n">fy3</span><span class="p">,</span> <span class="n">fy4</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="models.vehicle.dof10_model.DOF10.get_longitudinal_tire_forces" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_longitudinal_tire_forces</span><span class="p">(</span><span class="n">sigma1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">,</span> <span class="n">fz4</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Return longitudinal tires forces in the tire frame</p>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/dof10_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_longitudinal_tire_forces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sigma1</span><span class="p">,</span> <span class="n">alpha1</span><span class="p">,</span> <span class="n">fz1</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">,</span> <span class="n">alpha2</span><span class="p">,</span> <span class="n">fz2</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">,</span> <span class="n">alpha3</span><span class="p">,</span> <span class="n">fz3</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">,</span> <span class="n">alpha4</span><span class="p">,</span> <span class="n">fz4</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;Return longitudinal tires forces in the tire frame&#39;&#39;&#39;</span>

    <span class="c1"># Compute longitudinal tire forces</span>
    <span class="n">fx1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="n">sigma1</span><span class="p">)</span>
    <span class="n">fx2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f2</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz012</span><span class="p">,</span> <span class="n">sigma2</span><span class="p">)</span>
    <span class="n">fx3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f3</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="n">sigma3</span><span class="p">)</span>
    <span class="n">fx4</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f4</span><span class="o">.</span><span class="n">get_fx0</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fz034</span><span class="p">,</span> <span class="n">sigma4</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fx1</span><span class="p">,</span> <span class="n">fx2</span><span class="p">,</span> <span class="n">fx3</span><span class="p">,</span> <span class="n">fx4</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="models.vehicle.dof10_model.DOF10.get_suspension_speed_travel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_suspension_speed_travel</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">zdot</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Compute time derivative of suspension travel for each corner.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>z</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Heave displacement [m]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>zdot</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Heave velocity [m/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>theta</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pitch angle [rad]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>thetadt</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pitch rate [rad/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>phi</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Roll angle [rad]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>phidt</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Roll rate [rad/s]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>dzg1dt, dzg2dt, dzg3dt, dzg4dt: Suspension velocity at each corner.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>models/vehicle/dof10_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_suspension_speed_travel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">zdot</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">thetadt</span><span class="p">,</span> <span class="n">phi</span><span class="p">,</span> <span class="n">phidt</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Compute time derivative of suspension travel for each corner.</span>

<span class="sd">    Args:</span>
<span class="sd">        z (float): Heave displacement [m]</span>
<span class="sd">        zdot (float): Heave velocity [m/s]</span>
<span class="sd">        theta (float): Pitch angle [rad]</span>
<span class="sd">        thetadt (float): Pitch rate [rad/s]</span>
<span class="sd">        phi (float): Roll angle [rad]</span>
<span class="sd">        phidt (float): Roll rate [rad/s]</span>

<span class="sd">    Returns:</span>
<span class="sd">        dzg1dt, dzg2dt, dzg3dt, dzg4dt: Suspension velocity at each corner.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Contribution pitch/roll (ton expression existante)</span>
    <span class="n">dzg1dt_pr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">dzg2dt_pr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">dzg3dt_pr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="n">dzg4dt_pr</span> <span class="o">=</span> <span class="p">(</span>
        <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">thetadt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
        <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">phidt</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># Ajout du heave (zdot) identique sur les 4 coins</span>
    <span class="n">dzg1dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg1dt_pr</span>
    <span class="n">dzg2dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg2dt_pr</span>
    <span class="n">dzg3dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg3dt_pr</span>
    <span class="n">dzg4dt</span> <span class="o">=</span> <span class="n">zdot</span> <span class="o">+</span> <span class="n">dzg4dt_pr</span>

    <span class="k">return</span> <span class="n">dzg1dt</span><span class="p">,</span> <span class="n">dzg2dt</span><span class="p">,</span> <span class="n">dzg3dt</span><span class="p">,</span> <span class="n">dzg4dt</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="models.vehicle.dof10_model.DOF10.get_suspension_travel" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_suspension_travel</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Suspension travel at each corner.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>z</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>absolute CG height [m]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>theta</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>pitch angle [rad]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>phi</code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>roll angle [rad]</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="convention" open>
  <summary>Convention</summary>
  <ul>
<li>z = self.h_cg  → static equilibrium (no suspension deflection)</li>
<li>z &gt; self.h_cg  → body moves up</li>
<li>z &lt; self.h_cg  → body moves down</li>
</ul>
</details>
            <details class="quote">
              <summary>Source code in <code>models/vehicle/dof10_model.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_suspension_travel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">phi</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Suspension travel at each corner.</span>

<span class="sd">    Args:</span>
<span class="sd">        z (float): absolute CG height [m]</span>
<span class="sd">        theta (float): pitch angle [rad]</span>
<span class="sd">        phi (float): roll angle [rad]</span>

<span class="sd">    Convention:</span>
<span class="sd">        - z = self.h_cg  → static equilibrium (no suspension deflection)</span>
<span class="sd">        - z &gt; self.h_cg  → body moves up</span>
<span class="sd">        - z &lt; self.h_cg  → body moves down</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Heave relatif par rapport à la hauteur statique du CG</span>
    <span class="n">z_rel</span> <span class="o">=</span> <span class="n">z</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">h</span>

    <span class="c1"># Contribution pitch/roll (tes formules d’origine)</span>
    <span class="n">dzg1_pr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">dzg2_pr</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">dzg3_pr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>
    <span class="n">dzg4_pr</span> <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">L2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span>

    <span class="c1"># Ajout de la composante heave relative (même sur les 4 coins)</span>
    <span class="n">dzg1</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg1_pr</span>
    <span class="n">dzg2</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg2_pr</span>
    <span class="n">dzg3</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg3_pr</span>
    <span class="n">dzg4</span> <span class="o">=</span> <span class="n">z_rel</span> <span class="o">+</span> <span class="n">dzg4_pr</span>

    <span class="k">return</span> <span class="n">dzg1</span><span class="p">,</span> <span class="n">dzg2</span><span class="p">,</span> <span class="n">dzg3</span><span class="p">,</span> <span class="n">dzg4</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF" class="doc doc-heading">
            <code>VehiclePhysicalParams10DOF</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">


        <p>Physical parameters for a 10 Degrees-of-Freedom vehicle model,
with suspension properties indexed by wheel position (0:FL, 1:FR, 2:RL, 3:RR).</p>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.g">g</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Gravitational acceleration [m/s²]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.m">m</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Total vehicle mass [kg]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ms">ms</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Suspended mass of the vehicle [kg]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.lf">lf</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance from CG to front axle [m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.lr">lr</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Distance from CG to rear axle [m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.h">h</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Height of CG above ground [m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.L1">L1</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Half of front track width [m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.L2">L2</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Half of rear track width [m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.r">r</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Effective tire rolling radius [m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ix">ix</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Roll moment of inertia (around x-axis) [kg·m²]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.iy">iy</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Pitch moment of inertia (around y-axis) [kg·m²]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.iz">iz</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Yaw moment of inertia (around z-axis) [kg·m²]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ir">ir</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rotational inertia of one wheel [kg·m²]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ra">ra</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rolling resistance coefficient [N·s/m]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.s">s</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Frontal surface area [m²]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.cx">cx</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Aerodynamic drag coefficient [-]</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.Suspension">Suspension</span></code></td>
            <td>
                  <code>stiffness[N / <span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.m">m</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ks1">ks1</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Front-left</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ks2">ks2</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Front-right</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ks3">ks3</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rear-left</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ks4">ks4</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rear-right</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.Suspension">Suspension</span></code></td>
            <td>
                  <code>damping[N·s / <span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.m">m</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ds1">ds1</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Front-left</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ds2">ds2</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Front-right</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ds3">ds3</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rear-left</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ds4">ds4</span></code></td>
            <td>
                  <code>float</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Rear-right</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

              <details class="quote">
                <summary>Source code in <code>models/vehicle/dof10_model.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">VehiclePhysicalParams10DOF</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Physical parameters for a 10 Degrees-of-Freedom vehicle model,</span>
<span class="sd">    with suspension properties indexed by wheel position (0:FL, 1:FR, 2:RL, 3:RR).</span>

<span class="sd">    Attributes:</span>
<span class="sd">        g (float): Gravitational acceleration [m/s²]</span>
<span class="sd">        m (float): Total vehicle mass [kg]</span>
<span class="sd">        ms (float): Suspended mass of the vehicle [kg]</span>
<span class="sd">        lf (float): Distance from CG to front axle [m]</span>
<span class="sd">        lr (float): Distance from CG to rear axle [m]</span>
<span class="sd">        h (float): Height of CG above ground [m]</span>
<span class="sd">        L1 (float): Half of front track width [m]</span>
<span class="sd">        L2 (float): Half of rear track width [m]</span>
<span class="sd">        r (float): Effective tire rolling radius [m]</span>
<span class="sd">        ix (float): Roll moment of inertia (around x-axis) [kg·m²]</span>
<span class="sd">        iy (float): Pitch moment of inertia (around y-axis) [kg·m²]</span>
<span class="sd">        iz (float): Yaw moment of inertia (around z-axis) [kg·m²]</span>
<span class="sd">        ir (float): Rotational inertia of one wheel [kg·m²]</span>
<span class="sd">        ra (float): Rolling resistance coefficient [N·s/m]</span>
<span class="sd">        s (float): Frontal surface area [m²]</span>
<span class="sd">        cx (float): Aerodynamic drag coefficient [-]</span>

<span class="sd">        Suspension stiffness [N/m]:</span>
<span class="sd">        ks1: Front-left</span>
<span class="sd">        ks2: Front-right</span>
<span class="sd">        ks3: Rear-left</span>
<span class="sd">        ks4: Rear-right</span>

<span class="sd">        Suspension damping [N·s/m]:</span>
<span class="sd">        ds1: Front-left</span>
<span class="sd">        ds2: Front-right</span>
<span class="sd">        ds3: Rear-left</span>
<span class="sd">        ds4: Rear-right</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Vehicle geometry &amp; dynamics</span>
    <span class="n">g</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">m</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">ms</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">lf</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">lr</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">h</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">L1</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">L2</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">r</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">ix</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">iy</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">iz</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">ir</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">ra</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">s</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">cx</span><span class="p">:</span> <span class="nb">float</span>

    <span class="c1"># Suspension stiffness [N/m]</span>
    <span class="n">ks1</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Front-left</span>
    <span class="n">ks2</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Front-right</span>
    <span class="n">ks3</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Rear-left</span>
    <span class="n">ks4</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Rear-right</span>

    <span class="c1"># Suspension damping [N·s/m]</span>
    <span class="n">ds1</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Front-left</span>
    <span class="n">ds2</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Front-right</span>
    <span class="n">ds3</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Rear-left</span>
    <span class="n">ds4</span><span class="p">:</span> <span class="nb">float</span>  <span class="c1"># Rear-right</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">l</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Total wheelbase [m]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">L</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Total track width [m]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">L1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">L2</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fz012</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Static vertical load on each front wheel [N] (approximate)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lr</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">fz034</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Static vertical load on each rear wheel [N] (approximate)&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">m</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">lf</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">g</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">l</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">m_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inverse of vehicle mass [1/kg]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">m</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ms_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inverse of vehicle mass [1/kg]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ms</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ix_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inverse of yaw moment of inertia [1/(kg·m²)]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ix</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">iy_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inverse of yaw moment of inertia [1/(kg·m²)]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">iy</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">iz_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inverse of yaw moment of inertia [1/(kg·m²)]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">iz</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">ir_inv</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Inverse of wheel inertia [1/(kg·m²)]&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">ir</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.L" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">L</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Total track width [m]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.fz012" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fz012</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Static vertical load on each front wheel [N] (approximate)</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.fz034" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">fz034</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Static vertical load on each rear wheel [N] (approximate)</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ir_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ir_inv</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Inverse of wheel inertia [1/(kg·m²)]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ix_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ix_inv</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Inverse of yaw moment of inertia [1/(kg·m²)]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.iy_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">iy_inv</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Inverse of yaw moment of inertia [1/(kg·m²)]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.iz_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">iz_inv</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Inverse of yaw moment of inertia [1/(kg·m²)]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.l" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">l</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Total wheelbase [m]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.m_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">m_inv</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Inverse of vehicle mass [1/kg]</p>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="models.vehicle.dof10_model.VehiclePhysicalParams10DOF.ms_inv" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ms_inv</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Inverse of vehicle mass [1/kg]</p>
    </div>

</div>





  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "toc.integrate", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>